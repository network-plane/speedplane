{
  "version": 3,
  "sources": ["../src/main.ts"],
  "sourcesContent": ["type SpeedtestResult = {\n  id: string;\n  timestamp: string;\n  download_mbps: number;\n  upload_mbps: number;\n  ping_ms: number;\n  jitter_ms?: number;\n  packet_loss_pct?: number;\n  isp?: string;\n  external_ip?: string;\n  server_id?: string;\n  server_name?: string;\n  server_country?: string;\n};\n\ntype Aggregate = {\n  count: number;\n  avg_download_mbps: number;\n  avg_upload_mbps: number;\n  avg_ping_ms: number;\n  avg_jitter_ms: number;\n  avg_packet_loss_pct: number;\n};\n\ntype SummaryResponse = {\n  latest?: SpeedtestResult;\n  averages: Record<string, Aggregate>;\n};\n\ntype Schedule = {\n  id: string;\n  name: string;\n  type: \"interval\" | \"daily\";\n  enabled: boolean;\n  every?: string;\n  time_of_day?: string;\n};\n\nfunction $(id: string): HTMLElement {\n  const el = document.getElementById(id);\n  if (!el) {\n    throw new Error(`Missing element #${id}`);\n  }\n  return el;\n}\n\nasync function fetchJSON<T>(url: string, options: RequestInit = {}): Promise<T> {\n  const res = await fetch(url, {\n    ...options,\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...(options.headers || {}),\n    },\n  });\n  if (!res.ok) {\n    throw new Error(`${res.status} ${res.statusText}`);\n  }\n  return (await res.json()) as T;\n}\n\nfunction formatNumber(val: number | undefined | null, digits = 2): string {\n  if (val == null || Number.isNaN(val)) return \"\u2013\";\n  return val.toFixed(digits);\n}\n\nfunction formatDate(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n\nfunction formatTime24h(date: Date): string {\n  const hours = String(date.getHours()).padStart(2, \"0\");\n  const minutes = String(date.getMinutes()).padStart(2, \"0\");\n  return `${hours}:${minutes}`;\n}\n\nfunction formatDateTime(date: Date): string {\n  return `${formatDate(date)} ${formatTime24h(date)}`;\n}\n\n/* ---------- SUMMARY CARDS ---------- */\n\nfunction updateComparison(\n  compareEl: HTMLElement,\n  latest: number,\n  average: number,\n  isLowerBetter: boolean\n): void {\n  if (!average || average === 0 || !latest || latest < 0) {\n    compareEl.textContent = \"\";\n    compareEl.className = \"card-compare\";\n    return;\n  }\n\n  const percentDiff = ((latest - average) / average) * 100;\n  const absPercent = Math.abs(percentDiff);\n\n  if (absPercent < 0.1) {\n    // Less than 0.1% difference, consider it the same\n    compareEl.textContent = \"\";\n    compareEl.className = \"card-compare\";\n    return;\n  }\n\n  let isSlower: boolean;\n  if (isLowerBetter) {\n    // For ping, jitter, packet loss: higher is worse\n    isSlower = percentDiff > 0;\n  } else {\n    // For download, upload: lower is worse\n    isSlower = percentDiff < 0;\n  }\n\n  const arrow = isSlower\n    ? (isLowerBetter ? \"\u2191\" : \"\u2193\")\n    : (isLowerBetter ? \"\u2193\" : \"\u2191\");\n  const text = isSlower ? \"slower\" : \"faster\";\n  const className = isSlower ? \"card-compare slower\" : \"card-compare faster\";\n\n  compareEl.className = className;\n  compareEl.innerHTML = `<span class=\"arrow\">${arrow}</span> ${formatNumber(absPercent, 2)}% ${text}`;\n}\n\nasync function loadSummary(): Promise<void> {\n  const data = await fetchJSON<SummaryResponse>(\"/api/summary\");\n\n  if (data.latest) {\n    $(\"latest-download-value\").textContent = formatNumber(\n      data.latest.download_mbps,\n    );\n    $(\"latest-download-sub\").textContent = \"Mbps\";\n    $(\"latest-upload-value\").textContent = formatNumber(\n      data.latest.upload_mbps,\n    );\n    $(\"latest-upload-sub\").textContent = \"Mbps\";\n    $(\"latest-ping-value\").textContent = formatNumber(data.latest.ping_ms, 1);\n    $(\"latest-ping-sub\").textContent = \"ms\";\n    $(\"latest-jitter-value\").textContent = formatNumber(\n      data.latest.jitter_ms ?? 0,\n      1,\n    );\n    $(\"latest-jitter-sub\").textContent = \"ms\";\n    const packetLoss = data.latest.packet_loss_pct ?? -1;\n    if (packetLoss < 0) {\n      $(\"latest-packetloss-value\").textContent = \"\u2014\";\n      $(\"latest-packetloss-sub\").textContent = \"\";\n    } else {\n      $(\"latest-packetloss-value\").textContent = formatNumber(packetLoss, 2);\n      $(\"latest-packetloss-sub\").textContent = \"%\";\n    }\n\n    // Update comparison indicators\n    const avg30 = data.averages[\"last30days\"];\n    if (avg30) {\n      updateComparison(\n        $(\"latest-download-compare\"),\n        data.latest.download_mbps,\n        avg30.avg_download_mbps,\n        false // Higher is better\n      );\n      updateComparison(\n        $(\"latest-upload-compare\"),\n        data.latest.upload_mbps,\n        avg30.avg_upload_mbps,\n        false // Higher is better\n      );\n      updateComparison(\n        $(\"latest-ping-compare\"),\n        data.latest.ping_ms,\n        avg30.avg_ping_ms,\n        true // Lower is better\n      );\n      if (data.latest.jitter_ms !== undefined && data.latest.jitter_ms >= 0) {\n        updateComparison(\n          $(\"latest-jitter-compare\"),\n          data.latest.jitter_ms,\n          avg30.avg_jitter_ms,\n          true // Lower is better\n        );\n      } else {\n        $(\"latest-jitter-compare\").textContent = \"\";\n        $(\"latest-jitter-compare\").className = \"card-compare\";\n      }\n      if (packetLoss >= 0) {\n        updateComparison(\n          $(\"latest-packetloss-compare\"),\n          packetLoss,\n          avg30.avg_packet_loss_pct,\n          true // Lower is better\n        );\n      } else {\n        $(\"latest-packetloss-compare\").textContent = \"\";\n        $(\"latest-packetloss-compare\").className = \"card-compare\";\n      }\n    }\n  }\n}\n\n/* ---------- HISTORY TABLE ---------- */\n\nasync function loadHistoryTable(): Promise<void> {\n  const url = \"/api/history?range=24h\";\n\n  const rows = await fetchJSON<SpeedtestResult[]>(url);\n\n  const tbody = $(\"history-table\").querySelector(\"tbody\");\n  if (!tbody) return;\n  tbody.innerHTML = \"\";\n\n  for (const r of rows) {\n    const tr = document.createElement(\"tr\");\n    const serverInfo = r.server_name\n      ? `${r.server_name}${r.server_country ? ` (${r.server_country})` : \"\"}${r.server_id ? ` [${r.server_id}]` : \"\"}`\n      : r.server_id || \"\u2013\";\n    tr.innerHTML = `\n      <td style=\"font-family: monospace; font-size: 11px;\">${r.id.substring(0, 8)}</td>\n      <td>${formatDateTime(new Date(r.timestamp))}</td>\n      <td>${formatNumber(r.download_mbps)}</td>\n      <td>${formatNumber(r.upload_mbps)}</td>\n      <td>${formatNumber(r.ping_ms, 1)}</td>\n      <td>${formatNumber(r.jitter_ms ?? 0, 1)}</td>\n      <td>${\n        (r.packet_loss_pct ?? -1) < 0\n          ? \"\u2014\"\n          : formatNumber(r.packet_loss_pct ?? 0, 2)\n      }</td>\n      <td style=\"font-family: monospace; font-size: 12px;\">${r.external_ip || \"\u2013\"}</td>\n      <td>${r.isp || \"\u2013\"}</td>\n      <td>${serverInfo}</td>\n    `;\n    tbody.appendChild(tr);\n  }\n}\n\n/* ---------- SIMPLE SVG LINE CHARTS ---------- */\n\ntype RangeKey = \"24h\" | \"7d\" | \"30d\";\n\n\nasync function loadHistoryForRange(range: RangeKey): Promise<SpeedtestResult[]> {\n  const url = \"/api/history?range=\" + encodeURIComponent(range);\n  return await fetchJSON<SpeedtestResult[]>(url);\n}\n\ntype ChartDataResponse = {\n  data: SpeedtestResult[];\n  stats?: {\n    min: number;\n    p10: number;\n    q1: number;\n    median: number;\n    q3: number;\n    p90: number;\n    max: number;\n  };\n  min_value: number;\n  max_value: number;\n};\n\nasync function loadChartData(\n  range: RangeKey,\n  metric: \"download\" | \"upload\" | \"ping\" | \"jitter\"\n): Promise<ChartDataResponse> {\n  const url =\n    \"/api/chart-data?range=\" +\n    encodeURIComponent(range) +\n    \"&metric=\" +\n    encodeURIComponent(metric);\n  return await fetchJSON<ChartDataResponse>(url);\n}\n\nfunction renderLineChart(\n  containerId: string,\n  rows: SpeedtestResult[],\n  key: \"download_mbps\" | \"upload_mbps\" | \"ping_ms\" | \"jitter_ms\",\n): void {\n  const container = $(containerId);\n  container.innerHTML = \"\";\n\n  if (!rows.length) {\n    container.textContent = \"No data for selected range.\";\n    return;\n  }\n\n  const svgNS = \"http://www.w3.org/2000/svg\";\n  // Use fixed viewBox coordinate system - SVG will scale to container\n  // This ensures labels and elements are positioned correctly\n  const width = 300;\n  const height = 50;\n  const paddingX = 12;\n  const paddingY = 8;\n  const paddingBottom = 12; // Space for x-axis labels\n\n  const svg = document.createElementNS(svgNS, \"svg\");\n  svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n  svg.setAttribute(\"preserveAspectRatio\", \"xMidYMid meet\");\n  svg.style.width = \"100%\";\n  svg.style.height = \"100%\";\n\n  const times = rows.map((r) => new Date(r.timestamp).getTime());\n  const values = rows.map((r) => {\n    const val = (r as any)[key] as number;\n    // Handle optional fields that might be undefined\n    if (key === \"jitter_ms\") {\n      return val ?? 0;\n    }\n    return val;\n  });\n\n  const minX = Math.min(...times);\n  const maxX = Math.max(...times);\n  let minY = Math.min(...values);\n  let maxY = Math.max(...values);\n\n  if (!Number.isFinite(minY) || !Number.isFinite(maxY)) {\n    container.textContent = \"No valid data.\";\n    return;\n  }\n\n  if (minY === maxY) {\n    const delta = minY === 0 ? 1 : minY * 0.1;\n    minY -= delta;\n    maxY += delta;\n  }\n\n  const innerW = width - paddingX * 2;\n  const innerH = height - paddingY - paddingBottom;\n\n  // Create tooltip element (before drawing elements that need it)\n  const tooltip = document.createElement(\"div\");\n  tooltip.style.cssText = `\n    position: fixed;\n    background: rgba(26, 26, 26, 0.95);\n    border: 1px solid var(--border, rgba(255,140,0,.25));\n    border-radius: 4px;\n    padding: 6px 10px;\n    font-size: 11px;\n    color: var(--txt, #E8E8E8);\n    pointer-events: none;\n    z-index: 10000;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    display: none;\n    white-space: nowrap;\n  `;\n  document.body.appendChild(tooltip);\n\n  // Helper to get metric name and unit\n  const getMetricInfo = (k: string): { name: string; unit: string } => {\n    switch (k) {\n      case \"download_mbps\":\n        return { name: \"Download\", unit: \"Mbps\" };\n      case \"upload_mbps\":\n        return { name: \"Upload\", unit: \"Mbps\" };\n      case \"ping_ms\":\n        return { name: \"Ping\", unit: \"ms\" };\n      case \"jitter_ms\":\n        return { name: \"Jitter\", unit: \"ms\" };\n      default:\n        return { name: \"Value\", unit: \"\" };\n    }\n  };\n\n  const metricInfo = getMetricInfo(key);\n\n  // Draw horizontal grid lines (dimmer white)\n  const gridLines = 3;\n  for (let i = 0; i <= gridLines; i++) {\n    const yPos = paddingY + (innerH / gridLines) * i;\n    const grid = document.createElementNS(svgNS, \"line\");\n    grid.setAttribute(\"x1\", paddingX.toString());\n    grid.setAttribute(\"x2\", (width - paddingX).toString());\n    grid.setAttribute(\"y1\", yPos.toString());\n    grid.setAttribute(\"y2\", yPos.toString());\n    grid.setAttribute(\"stroke\", \"rgba(255,255,255,0.08)\");\n    grid.setAttribute(\"stroke-width\", \"0.3\");\n    svg.appendChild(grid);\n\n    // Add bandwidth value labels on the left\n    const value = maxY - (maxY - minY) * (i / gridLines);\n    const text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", (paddingX - 2).toString());\n    text.setAttribute(\"y\", (yPos + 1.5).toString());\n    text.setAttribute(\"text-anchor\", \"end\");\n    text.setAttribute(\"fill\", \"rgba(255,255,255,0.4)\");\n    text.setAttribute(\"font-size\", \"2.5\");\n    text.textContent = formatNumber(value, 1);\n    svg.appendChild(text);\n  }\n\n  // Draw vertical lines for each test (dimmer)\n  const coords = rows.map((r) => {\n    const t = new Date(r.timestamp).getTime();\n    const xNorm = maxX === minX ? 0 : (t - minX) / (maxX - minX);\n    const v = (r as any)[key] as number;\n    const yNorm = maxY === minY ? 0.5 : (v - minY) / (maxY - minY);\n    const x = paddingX + xNorm * innerW;\n    const y = paddingY + innerH - yNorm * innerH;\n    return { x, y, time: t };\n  });\n\n  // Draw vertical lines for each test point\n  coords.forEach((coord) => {\n    const vLine = document.createElementNS(svgNS, \"line\");\n    vLine.setAttribute(\"x1\", coord.x.toString());\n    vLine.setAttribute(\"x2\", coord.x.toString());\n    vLine.setAttribute(\"y1\", paddingY.toString());\n    vLine.setAttribute(\"y2\", (paddingY + innerH).toString());\n    vLine.setAttribute(\"stroke\", \"rgba(255,255,255,0.06)\");\n    vLine.setAttribute(\"stroke-width\", \"0.2\");\n    svg.appendChild(vLine);\n  });\n\n  // Calculate and draw average line\n  const avgValue = values.reduce((sum, val) => sum + val, 0) / values.length;\n  if (Number.isFinite(avgValue) && avgValue >= minY && avgValue <= maxY) {\n    const avgYNorm = (avgValue - minY) / (maxY - minY);\n    const avgY = paddingY + innerH - avgYNorm * innerH;\n    \n    const avgLine = document.createElementNS(svgNS, \"line\");\n    avgLine.setAttribute(\"x1\", paddingX.toString());\n    avgLine.setAttribute(\"x2\", (width - paddingX).toString());\n    avgLine.setAttribute(\"y1\", avgY.toString());\n    avgLine.setAttribute(\"y2\", avgY.toString());\n    avgLine.setAttribute(\"stroke\", \"#ff4757\");\n    avgLine.setAttribute(\"stroke-width\", \"0.6\");\n    avgLine.setAttribute(\"stroke-dasharray\", \"2,2\");\n    avgLine.setAttribute(\"opacity\", \"0.8\");\n    avgLine.style.cursor = \"pointer\";\n    \n    // Add hover event for average line tooltip\n    avgLine.addEventListener(\"mouseenter\", (e) => {\n      const svgRect = svg.getBoundingClientRect();\n      const scaleY = svgRect.height / height;\n      const mouseX = (e as MouseEvent).clientX;\n      const y = svgRect.top + avgY * scaleY;\n      \n      tooltip.innerHTML = `\n        <div style=\"font-weight: 600; margin-bottom: 2px;\">Average ${metricInfo.name}</div>\n        <div>${formatNumber(avgValue, 2)} ${metricInfo.unit}</div>\n        <div style=\"color: var(--muted, #B0B0B0); font-size: 10px; margin-top: 2px;\">Based on ${rows.length} measurement${rows.length !== 1 ? \"s\" : \"\"}</div>\n      `;\n      tooltip.style.display = \"block\";\n      \n      // Position tooltip above the cursor, centered horizontally\n      const tooltipRect = tooltip.getBoundingClientRect();\n      tooltip.style.left = `${mouseX - tooltipRect.width / 2}px`;\n      tooltip.style.top = `${y - tooltipRect.height - 8}px`;\n    });\n    \n    avgLine.addEventListener(\"mouseleave\", () => {\n      tooltip.style.display = \"none\";\n    });\n    \n    svg.appendChild(avgLine);\n  }\n\n  // Draw the data line\n  const path = document.createElementNS(svgNS, \"path\");\n  const d = coords\n    .map((p, i) => `${i === 0 ? \"M\" : \"L\"}${p.x.toFixed(2)},${p.y.toFixed(2)}`)\n    .join(\" \");\n  path.setAttribute(\"d\", d);\n  path.setAttribute(\"fill\", \"none\");\n  path.setAttribute(\"stroke\", \"rgba(255,179,65,0.9)\");\n  path.setAttribute(\"stroke-width\", \"0.8\");\n  path.setAttribute(\"stroke-linejoin\", \"round\");\n  path.setAttribute(\"stroke-linecap\", \"round\");\n  svg.appendChild(path);\n\n\n  // Draw data points with tooltips\n  coords.forEach((coord, index) => {\n    const circle = document.createElementNS(svgNS, \"circle\");\n    circle.setAttribute(\"cx\", coord.x.toString());\n    circle.setAttribute(\"cy\", coord.y.toString());\n    circle.setAttribute(\"r\", \"1.2\");\n    circle.setAttribute(\"fill\", \"#ffb341\");\n    circle.style.cursor = \"pointer\";\n    \n    // Add hover events for tooltip\n    const row = rows[index];\n    const value = values[index];\n    const date = new Date(row.timestamp);\n    \n    circle.addEventListener(\"mouseenter\", (e) => {\n      const svgRect = svg.getBoundingClientRect();\n      const scaleX = svgRect.width / width;\n      const scaleY = svgRect.height / height;\n      \n      // Highlight the circle\n      circle.setAttribute(\"r\", \"1.4\");\n      circle.setAttribute(\"fill\", \"#ffb341\");\n      circle.setAttribute(\"stroke\", \"#ffd700\");\n      circle.setAttribute(\"stroke-width\", \"0.5\");\n      \n      tooltip.innerHTML = `\n        <div style=\"font-weight: 600; margin-bottom: 2px;\">${metricInfo.name}</div>\n        <div>${formatNumber(value, 2)} ${metricInfo.unit}</div>\n        <div style=\"color: var(--muted, #B0B0B0); font-size: 10px; margin-top: 2px;\">${formatDateTime(date)}</div>\n      `;\n      tooltip.style.display = \"block\";\n      \n      const x = svgRect.left + coord.x * scaleX;\n      const y = svgRect.top + coord.y * scaleY;\n      \n      // Position tooltip above the point, centered horizontally\n      // Get dimensions after display\n      const tooltipRect = tooltip.getBoundingClientRect();\n      tooltip.style.left = `${x - tooltipRect.width / 2}px`;\n      tooltip.style.top = `${y - tooltipRect.height - 8}px`;\n    });\n    \n    circle.addEventListener(\"mouseleave\", () => {\n      // Restore original circle size\n      circle.setAttribute(\"r\", \"1.2\");\n      circle.setAttribute(\"fill\", \"#ffb341\");\n      circle.removeAttribute(\"stroke\");\n      circle.removeAttribute(\"stroke-width\");\n      tooltip.style.display = \"none\";\n    });\n    \n    svg.appendChild(circle);\n  });\n\n  // Add x-axis labels (time/date) - always use 24h format and YYYY-MM-DD\n  const labelCount = Math.min(rows.length, 6); // Max 6 labels\n  const labelStep = Math.max(1, Math.floor(rows.length / labelCount));\n  for (let i = 0; i < rows.length; i += labelStep) {\n    if (i >= coords.length) break;\n    const coord = coords[i];\n    const date = new Date(rows[i].timestamp);\n    // Always show date in YYYY-MM-DD format and time in 24h format\n    const timeStr = `${formatTime24h(date)}`;\n\n    const text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", coord.x.toString());\n    text.setAttribute(\"y\", (height - paddingBottom + 8).toString());\n    text.setAttribute(\"text-anchor\", \"middle\");\n    text.setAttribute(\"fill\", \"rgba(255,255,255,0.4)\");\n    text.setAttribute(\"font-size\", \"2.5\");\n    text.textContent = timeStr;\n    svg.appendChild(text);\n  }\n\n  container.appendChild(svg);\n}\n\n\nasync function renderPercentileChart(\n  containerId: string,\n  range: RangeKey,\n  metric: \"download\" | \"upload\" | \"ping\" | \"jitter\",\n): Promise<void> {\n  const container = $(containerId);\n  container.innerHTML = \"\";\n\n  const chartData = await loadChartData(range, metric);\n  const rows = chartData.data;\n\n  if (!rows.length || !chartData.stats) {\n    container.textContent = \"No data for selected range.\";\n    return;\n  }\n\n  const stats = chartData.stats;\n  const svgNS = \"http://www.w3.org/2000/svg\";\n  // Use fixed viewBox coordinate system - SVG will scale to container\n  // This ensures labels and elements are positioned correctly\n  const width = 300;\n  const height = 50;\n  const paddingX = 12;\n  const paddingY = 8;\n  const paddingBottom = 12;\n\n  const svg = document.createElementNS(svgNS, \"svg\");\n  svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n  svg.setAttribute(\"preserveAspectRatio\", \"xMidYMid meet\");\n  svg.style.width = \"100%\";\n  svg.style.height = \"100%\";\n\n  let minY = Math.min(stats.min, stats.p10);\n  let maxY = Math.max(stats.max, stats.p90);\n  if (minY === maxY) {\n    const delta = minY === 0 ? 1 : minY * 0.1;\n    minY -= delta;\n    maxY += delta;\n  }\n\n  const innerW = width - paddingX * 2;\n  const innerH = height - paddingY - paddingBottom;\n\n  const yPos = (val: number): number => {\n    const yNorm = maxY === minY ? 0.5 : (val - minY) / (maxY - minY);\n    return paddingY + innerH - yNorm * innerH;\n  };\n\n  // Draw grid lines\n  const gridLines = 3;\n  for (let i = 0; i <= gridLines; i++) {\n    const yPos = paddingY + (innerH / gridLines) * i;\n    const grid = document.createElementNS(svgNS, \"line\");\n    grid.setAttribute(\"x1\", paddingX.toString());\n    grid.setAttribute(\"x2\", (width - paddingX).toString());\n    grid.setAttribute(\"y1\", yPos.toString());\n    grid.setAttribute(\"y2\", yPos.toString());\n    grid.setAttribute(\"stroke\", \"rgba(255,255,255,0.08)\");\n    grid.setAttribute(\"stroke-width\", \"0.3\");\n    svg.appendChild(grid);\n\n    const value = maxY - (maxY - minY) * (i / gridLines);\n    const text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", (paddingX - 2).toString());\n    text.setAttribute(\"y\", (yPos + 1.5).toString());\n    text.setAttribute(\"text-anchor\", \"end\");\n    text.setAttribute(\"fill\", \"rgba(255,255,255,0.4)\");\n    text.setAttribute(\"font-size\", \"2.5\");\n    text.textContent = formatNumber(value, 1);\n    svg.appendChild(text);\n  }\n\n  const centerX = width / 2;\n  const boxWidth = innerW * 0.4;\n\n  // Draw whiskers (min to p10, p90 to max)\n  const whisker = (y1: number, y2: number, x: number) => {\n    const line = document.createElementNS(svgNS, \"line\");\n    line.setAttribute(\"x1\", x.toString());\n    line.setAttribute(\"x2\", x.toString());\n    line.setAttribute(\"y1\", y1.toString());\n    line.setAttribute(\"y2\", y2.toString());\n    line.setAttribute(\"stroke\", \"rgba(255,255,255,0.5)\");\n    line.setAttribute(\"stroke-width\", \"0.4\");\n    svg.appendChild(line);\n  };\n\n  // Min to p10\n  whisker(yPos(stats.min), yPos(stats.p10), centerX);\n  // p90 to max\n  whisker(yPos(stats.p90), yPos(stats.max), centerX);\n\n  // Draw box (Q1 to Q3)\n  const boxY1 = yPos(stats.q3);\n  const boxY2 = yPos(stats.q1);\n  const box = document.createElementNS(svgNS, \"rect\");\n  box.setAttribute(\"x\", (centerX - boxWidth / 2).toString());\n  box.setAttribute(\"y\", boxY1.toString());\n  box.setAttribute(\"width\", boxWidth.toString());\n  box.setAttribute(\"height\", (boxY2 - boxY1).toString());\n  box.setAttribute(\"fill\", \"rgba(255,179,65,0.2)\");\n  box.setAttribute(\"stroke\", \"rgba(255,179,65,0.6)\");\n  box.setAttribute(\"stroke-width\", \"0.5\");\n  svg.appendChild(box);\n\n  // Draw median line\n  const medianY = yPos(stats.median);\n  const medianLine = document.createElementNS(svgNS, \"line\");\n  medianLine.setAttribute(\"x1\", (centerX - boxWidth / 2).toString());\n  medianLine.setAttribute(\"x2\", (centerX + boxWidth / 2).toString());\n  medianLine.setAttribute(\"y1\", medianY.toString());\n  medianLine.setAttribute(\"y2\", medianY.toString());\n  medianLine.setAttribute(\"stroke\", \"#ffb341\");\n  medianLine.setAttribute(\"stroke-width\", \"1\");\n  svg.appendChild(medianLine);\n\n  // Draw percentile markers\n  const markers = [\n    { val: stats.min, label: \"Min\", color: \"rgba(255,255,255,0.6)\" },\n    { val: stats.p10, label: \"P10\", color: \"rgba(255,255,255,0.5)\" },\n    { val: stats.q1, label: \"Q1\", color: \"rgba(255,179,65,0.7)\" },\n    { val: stats.median, label: \"Med\", color: \"#ffb341\" },\n    { val: stats.q3, label: \"Q3\", color: \"rgba(255,179,65,0.7)\" },\n    { val: stats.p90, label: \"P90\", color: \"rgba(255,255,255,0.5)\" },\n    { val: stats.max, label: \"Max\", color: \"rgba(255,255,255,0.6)\" },\n  ];\n\n  markers.forEach((m) => {\n    const y = yPos(m.val);\n    const circle = document.createElementNS(svgNS, \"circle\");\n    circle.setAttribute(\"cx\", centerX.toString());\n    circle.setAttribute(\"cy\", y.toString());\n    circle.setAttribute(\"r\", \"1\");\n    circle.setAttribute(\"fill\", m.color);\n    svg.appendChild(circle);\n  });\n\n  // Add statistics text\n  const statsText = document.createElementNS(svgNS, \"text\");\n  statsText.setAttribute(\"x\", centerX.toString());\n  statsText.setAttribute(\"y\", (height - paddingBottom + 6).toString());\n  statsText.setAttribute(\"text-anchor\", \"middle\");\n  statsText.setAttribute(\"fill\", \"rgba(255,255,255,0.5)\");\n  statsText.setAttribute(\"font-size\", \"2.2\");\n  statsText.textContent = `Med: ${formatNumber(stats.median, 1)} | Q1: ${formatNumber(stats.q1, 1)} | Q3: ${formatNumber(stats.q3, 1)}`;\n  svg.appendChild(statsText);\n\n  container.appendChild(svg);\n}\n\nasync function updateDownloadChart(): Promise<void> {\n  const select = $(\"range-download\") as HTMLSelectElement;\n  const toggle = $(\"chart-type-download\") as HTMLButtonElement;\n  const value = (select.value || \"24h\") as RangeKey;\n  if (toggle?.classList.contains(\"active\")) {\n    await renderPercentileChart(\"download-chart\", value, \"download\");\n  } else {\n    const rows = await loadHistoryForRange(value);\n    renderLineChart(\"download-chart\", rows, \"download_mbps\");\n  }\n}\n\nasync function updateUploadChart(): Promise<void> {\n  const select = $(\"range-upload\") as HTMLSelectElement;\n  const toggle = $(\"chart-type-upload\") as HTMLButtonElement;\n  const value = (select.value || \"24h\") as RangeKey;\n  if (toggle?.classList.contains(\"active\")) {\n    await renderPercentileChart(\"upload-chart\", value, \"upload\");\n  } else {\n    const rows = await loadHistoryForRange(value);\n    renderLineChart(\"upload-chart\", rows, \"upload_mbps\");\n  }\n}\n\nasync function updateLatencyChart(): Promise<void> {\n  const select = $(\"range-latency\") as HTMLSelectElement;\n  const toggle = $(\"chart-type-latency\") as HTMLButtonElement;\n  const value = (select.value || \"24h\") as RangeKey;\n  if (toggle?.classList.contains(\"active\")) {\n    await renderPercentileChart(\"latency-chart\", value, \"ping\");\n  } else {\n    const rows = await loadHistoryForRange(value);\n    renderLineChart(\"latency-chart\", rows, \"ping_ms\");\n  }\n}\n\nasync function updateJitterChart(): Promise<void> {\n  const select = $(\"range-jitter\") as HTMLSelectElement;\n  const toggle = $(\"chart-type-jitter\") as HTMLButtonElement;\n  const value = (select.value || \"24h\") as RangeKey;\n  if (toggle?.classList.contains(\"active\")) {\n    await renderPercentileChart(\"jitter-chart\", value, \"jitter\");\n  } else {\n    const rows = await loadHistoryForRange(value);\n    renderLineChart(\"jitter-chart\", rows, \"jitter_ms\");\n  }\n}\n\nfunction renderCombinedChart(\n  containerId: string,\n  rows: SpeedtestResult[],\n): void {\n  const container = $(containerId);\n  container.innerHTML = \"\";\n\n  if (!rows.length) {\n    container.textContent = \"No data for selected range.\";\n    return;\n  }\n\n  const svgNS = \"http://www.w3.org/2000/svg\";\n  const width = 300;\n  const height = 50;\n  const paddingLeft = 28; // Space for Y-axis labels\n  const paddingRight = 12;\n  const paddingTop = 8;\n  const paddingBottom = 20; // Space for X-axis labels and legend\n  const paddingX = paddingLeft;\n  const paddingY = paddingTop;\n\n  const svg = document.createElementNS(svgNS, \"svg\");\n  svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n  svg.setAttribute(\"preserveAspectRatio\", \"xMidYMid meet\");\n  svg.style.width = \"100%\";\n  svg.style.height = \"100%\";\n\n  const times = rows.map((r) => new Date(r.timestamp).getTime());\n  const downloadValues = rows.map((r) => r.download_mbps);\n  const uploadValues = rows.map((r) => r.upload_mbps);\n  const pingValues = rows.map((r) => r.ping_ms);\n  const jitterValues = rows.map((r) => r.jitter_ms ?? 0);\n\n  const minX = Math.min(...times);\n  const maxX = Math.max(...times);\n\n  // Colors for each metric\n  const metrics = [\n    { key: \"download_mbps\", values: downloadValues, color: \"#4ade80\", name: \"Download\", unit: \"Mbps\" },\n    { key: \"upload_mbps\", values: uploadValues, color: \"#60a5fa\", name: \"Upload\", unit: \"Mbps\" },\n    { key: \"ping_ms\", values: pingValues, color: \"#fbbf24\", name: \"Ping\", unit: \"ms\" },\n    { key: \"jitter_ms\", values: jitterValues, color: \"#f87171\", name: \"Jitter\", unit: \"ms\" },\n  ];\n\n  // Check if logarithmic scale is enabled\n  const useLogarithmic = localStorage.getItem(\"logarithmic-scale\") === \"true\";\n\n  // Calculate min/max for each metric separately\n  const metricRanges = metrics.map((metric) => {\n    const vals = metric.values.filter((v) => Number.isFinite(v));\n    if (vals.length === 0) {\n      if (useLogarithmic) {\n        return { min: 1, max: 10, logMin: 0, logMax: 1, logRange: 1, range: 1 };\n      }\n      return { min: 0, max: 1, range: 1 };\n    }\n    const min = Math.min(...vals);\n    const max = Math.max(...vals);\n    const range = max - min || 1; // Avoid division by zero\n    \n    if (useLogarithmic) {\n      // Use a small epsilon to avoid log(0) or log(negative)\n      const safeMin = Math.max(min, 0.001);\n      const logMin = Math.log10(safeMin);\n      const logMax = Math.log10(max);\n      const logRange = logMax - logMin || 1;\n      return { min: safeMin, max, logMin, logMax, logRange, range };\n    }\n    \n    return { min, max, range };\n  });\n\n  const innerW = width - paddingLeft - paddingRight;\n  const innerH = height - paddingTop - paddingBottom;\n\n  // Create tooltip\n  const tooltip = document.createElement(\"div\");\n  tooltip.style.cssText = `\n    position: fixed;\n    background: rgba(26, 26, 26, 0.95);\n    border: 1px solid var(--border, rgba(255,140,0,.25));\n    border-radius: 4px;\n    padding: 6px 10px;\n    font-size: 11px;\n    color: var(--txt, #E8E8E8);\n    pointer-events: none;\n    z-index: 10000;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    display: none;\n    white-space: nowrap;\n  `;\n  document.body.appendChild(tooltip);\n\n  // Draw grid lines (horizontal)\n  const gridLines = 4;\n  for (let i = 0; i <= gridLines; i++) {\n    const y = paddingY + (innerH / gridLines) * i;\n    const line = document.createElementNS(svgNS, \"line\");\n    line.setAttribute(\"x1\", paddingLeft.toString());\n    line.setAttribute(\"x2\", (width - paddingRight).toString());\n    line.setAttribute(\"y1\", y.toString());\n    line.setAttribute(\"y2\", y.toString());\n    line.setAttribute(\"stroke\", \"rgba(255,255,255,0.1)\");\n    line.setAttribute(\"stroke-width\", \"0.3\");\n    svg.appendChild(line);\n  }\n\n  // Draw grid lines (vertical) - show first, middle, last\n  const verticalGridPositions = [0, Math.floor(times.length / 2), times.length - 1];\n  verticalGridPositions.forEach((idx) => {\n    if (idx < 0 || idx >= times.length) return;\n    const xNorm = (times[idx] - minX) / (maxX - minX);\n    const x = paddingLeft + xNorm * innerW;\n    const line = document.createElementNS(svgNS, \"line\");\n    line.setAttribute(\"x1\", x.toString());\n    line.setAttribute(\"x2\", x.toString());\n    line.setAttribute(\"y1\", paddingY.toString());\n    line.setAttribute(\"y2\", (height - paddingBottom).toString());\n    line.setAttribute(\"stroke\", \"rgba(255,255,255,0.1)\");\n    line.setAttribute(\"stroke-width\", \"0.3\");\n    svg.appendChild(line);\n  });\n\n  // Draw Y-axis labels\n  if (useLogarithmic) {\n    // Logarithmic scale - show combined range\n    const overallMin = Math.min(...metricRanges.map((r) => r.min));\n    const overallMax = Math.max(...metricRanges.map((r) => r.max));\n    const overallLogMin = Math.log10(Math.max(overallMin, 0.001));\n    const overallLogMax = Math.log10(overallMax);\n    const overallLogRange = overallLogMax - overallLogMin;\n\n    for (let i = 0; i <= gridLines; i++) {\n      const y = paddingY + (innerH / gridLines) * i;\n      // Calculate log position (inverted: top is max, bottom is min)\n      const logPos = overallLogMax - (i / gridLines) * overallLogRange;\n      const value = Math.pow(10, logPos);\n      \n      // Format value appropriately\n      let label: string;\n      if (value >= 1000) {\n        label = `${(value / 1000).toFixed(1)}k`;\n      } else if (value >= 1) {\n        label = value.toFixed(1);\n      } else {\n        label = value.toFixed(3);\n      }\n      \n      const text = document.createElementNS(svgNS, \"text\");\n      text.setAttribute(\"x\", (paddingLeft - 4).toString());\n      text.setAttribute(\"y\", (y + 1.5).toString());\n      text.setAttribute(\"text-anchor\", \"end\");\n      text.setAttribute(\"fill\", \"rgba(255,255,255,0.5)\");\n      text.setAttribute(\"font-size\", \"2.2\");\n      text.textContent = label;\n      svg.appendChild(text);\n    }\n  } else {\n    // Percentage scale (0-100%)\n    for (let i = 0; i <= gridLines; i++) {\n      const y = paddingY + (innerH / gridLines) * i;\n      const percent = 100 - (i / gridLines) * 100;\n      const text = document.createElementNS(svgNS, \"text\");\n      text.setAttribute(\"x\", (paddingLeft - 4).toString());\n      text.setAttribute(\"y\", (y + 1.5).toString());\n      text.setAttribute(\"text-anchor\", \"end\");\n      text.setAttribute(\"fill\", \"rgba(255,255,255,0.5)\");\n      text.setAttribute(\"font-size\", \"2.2\");\n      text.textContent = `${Math.round(percent)}%`;\n      svg.appendChild(text);\n    }\n  }\n\n  // Draw X-axis labels (time)\n  const xLabelPositions = [0, Math.floor(times.length / 2), times.length - 1];\n  xLabelPositions.forEach((idx) => {\n    if (idx < 0 || idx >= times.length) return;\n    const xNorm = (times[idx] - minX) / (maxX - minX);\n    const x = paddingLeft + xNorm * innerW;\n    const date = new Date(times[idx]);\n    const text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", x.toString());\n    text.setAttribute(\"y\", (height - paddingBottom + 6).toString());\n    text.setAttribute(\"text-anchor\", \"middle\");\n    text.setAttribute(\"fill\", \"rgba(255,255,255,0.5)\");\n    text.setAttribute(\"font-size\", \"2.2\");\n    text.textContent = formatTime24h(date);\n    svg.appendChild(text);\n  });\n\n  // Calculate overall range for positioning (used in both modes)\n  let overallMin: number, overallMax: number, overallRange: number;\n  let overallLogMin: number, overallLogMax: number, overallLogRange: number;\n  \n  if (useLogarithmic) {\n    overallMin = Math.min(...metricRanges.map((r) => r.min));\n    overallMax = Math.max(...metricRanges.map((r) => r.max));\n    overallLogMin = Math.log10(Math.max(overallMin, 0.001));\n    overallLogMax = Math.log10(overallMax);\n    overallLogRange = overallLogMax - overallLogMin;\n  } else {\n    // For percentage mode, normalize each metric separately\n    overallMin = 0;\n    overallMax = 1;\n    overallRange = 1;\n  }\n\n  // Draw lines, averages, and data points for each metric\n  metrics.forEach((metric, metricIdx) => {\n    const range = metricRanges[metricIdx];\n    const coords: { x: number; y: number }[] = [];\n    \n    for (let i = 0; i < times.length; i++) {\n      const xNorm = (times[i] - minX) / (maxX - minX);\n      const x = paddingLeft + xNorm * innerW;\n      \n      let yNorm: number;\n      if (useLogarithmic) {\n        // Use logarithmic normalization\n        const safeValue = Math.max(metric.values[i], 0.001);\n        const overallLogValue = Math.log10(safeValue);\n        yNorm = overallLogRange > 0\n          ? (overallLogValue - overallLogMin) / overallLogRange\n          : 0.5;\n      } else {\n        // Use linear normalization (percentage) - each metric normalized separately\n        yNorm = range.range > 0 ? (metric.values[i] - range.min) / range.range : 0.5;\n      }\n      \n      const y = paddingY + innerH - yNorm * innerH;\n      coords.push({ x, y });\n    }\n\n    // Calculate and draw average line\n    const avgValue = metric.values.reduce((sum, val) => sum + val, 0) / metric.values.length;\n    if (Number.isFinite(avgValue)) {\n      let avgYNorm: number;\n      if (useLogarithmic) {\n        if (avgValue > 0) {\n          const safeAvg = Math.max(avgValue, 0.001);\n          const logAvg = Math.log10(safeAvg);\n          avgYNorm = overallLogRange > 0\n            ? (logAvg - overallLogMin) / overallLogRange\n            : 0.5;\n        } else {\n          return; // Skip average line if value is <= 0 in log mode\n        }\n      } else {\n        avgYNorm = range.range > 0 ? (avgValue - range.min) / range.range : 0.5;\n        if (avgYNorm < 0 || avgYNorm > 1) return; // Skip if outside range\n      }\n      \n      const avgY = paddingY + innerH - avgYNorm * innerH;\n      \n      const avgLine = document.createElementNS(svgNS, \"line\");\n      avgLine.setAttribute(\"x1\", paddingLeft.toString());\n      avgLine.setAttribute(\"x2\", (width - paddingRight).toString());\n      avgLine.setAttribute(\"y1\", avgY.toString());\n      avgLine.setAttribute(\"y2\", avgY.toString());\n      avgLine.setAttribute(\"stroke\", metric.color);\n      avgLine.setAttribute(\"stroke-width\", \"0.6\");\n      avgLine.setAttribute(\"stroke-dasharray\", \"2,2\");\n      avgLine.setAttribute(\"opacity\", \"0.6\");\n      avgLine.style.cursor = \"pointer\";\n      \n      // Add hover event for average line tooltip\n      avgLine.addEventListener(\"mouseenter\", (e) => {\n        const svgRect = svg.getBoundingClientRect();\n        const scaleY = svgRect.height / height;\n        const mouseX = (e as MouseEvent).clientX;\n        const y = svgRect.top + avgY * scaleY;\n        \n        tooltip.innerHTML = `\n          <div style=\"font-weight: 600; margin-bottom: 2px;\">Average ${metric.name}</div>\n          <div>${formatNumber(avgValue, 2)} ${metric.unit}</div>\n          <div style=\"color: var(--muted, #B0B0B0); font-size: 10px; margin-top: 2px;\">Based on ${rows.length} measurement${rows.length !== 1 ? \"s\" : \"\"}</div>\n        `;\n        tooltip.style.display = \"block\";\n        const tooltipRect = tooltip.getBoundingClientRect();\n        tooltip.style.left = `${mouseX - tooltipRect.width / 2}px`;\n        tooltip.style.top = `${y - tooltipRect.height - 5}px`;\n      });\n      \n      avgLine.addEventListener(\"mouseleave\", () => {\n        tooltip.style.display = \"none\";\n      });\n      \n      svg.appendChild(avgLine);\n    }\n\n    // Draw line\n    if (coords.length > 1) {\n      const path = document.createElementNS(svgNS, \"path\");\n      let pathData = `M ${coords[0].x} ${coords[0].y}`;\n      for (let i = 1; i < coords.length; i++) {\n        pathData += ` L ${coords[i].x} ${coords[i].y}`;\n      }\n      path.setAttribute(\"d\", pathData);\n      path.setAttribute(\"fill\", \"none\");\n      path.setAttribute(\"stroke\", metric.color);\n      path.setAttribute(\"stroke-width\", \"0.8\");\n      path.setAttribute(\"opacity\", \"0.8\");\n      svg.appendChild(path);\n    }\n\n    // Draw data points\n    coords.forEach((coord, index) => {\n      const circle = document.createElementNS(svgNS, \"circle\");\n      circle.setAttribute(\"cx\", coord.x.toString());\n      circle.setAttribute(\"cy\", coord.y.toString());\n      circle.setAttribute(\"r\", \"1.2\");\n      circle.setAttribute(\"fill\", metric.color);\n      circle.style.cursor = \"pointer\";\n\n      const row = rows[index];\n      const value = metric.values[index];\n      const date = new Date(row.timestamp);\n\n      circle.addEventListener(\"mouseenter\", (e) => {\n        const svgRect = svg.getBoundingClientRect();\n        const scaleX = svgRect.width / width;\n        const scaleY = svgRect.height / height;\n\n        circle.setAttribute(\"r\", \"1.4\");\n        circle.setAttribute(\"stroke\", \"#ffd700\");\n        circle.setAttribute(\"stroke-width\", \"0.5\");\n\n        tooltip.innerHTML = `\n          <div style=\"font-weight: 600; margin-bottom: 2px;\">${metric.name}</div>\n          <div>${formatNumber(value, 2)} ${metric.unit}</div>\n          <div style=\"color: var(--muted, #B0B0B0); font-size: 10px; margin-top: 2px;\">${formatDateTime(date)}</div>\n        `;\n        tooltip.style.display = \"block\";\n\n        const x = svgRect.left + coord.x * scaleX;\n        const y = svgRect.top + coord.y * scaleY;\n        const tooltipRect = tooltip.getBoundingClientRect();\n        tooltip.style.left = `${x - tooltipRect.width / 2}px`;\n        tooltip.style.top = `${y - tooltipRect.height - 5}px`;\n      });\n\n      circle.addEventListener(\"mouseleave\", () => {\n        circle.setAttribute(\"r\", \"1.2\");\n        circle.removeAttribute(\"stroke\");\n        circle.removeAttribute(\"stroke-width\");\n        tooltip.style.display = \"none\";\n      });\n\n      svg.appendChild(circle);\n    });\n  });\n\n  // Add legend\n  const legendY = height - paddingBottom + 4;\n  let legendX = paddingLeft;\n  metrics.forEach((metric) => {\n    const legendGroup = document.createElementNS(svgNS, \"g\");\n    \n    const circle = document.createElementNS(svgNS, \"circle\");\n    circle.setAttribute(\"cx\", legendX.toString());\n    circle.setAttribute(\"cy\", legendY.toString());\n    circle.setAttribute(\"r\", \"1.5\");\n    circle.setAttribute(\"fill\", metric.color);\n    legendGroup.appendChild(circle);\n\n    const text = document.createElementNS(svgNS, \"text\");\n    text.setAttribute(\"x\", (legendX + 4).toString());\n    text.setAttribute(\"y\", (legendY + 1).toString());\n    text.setAttribute(\"fill\", \"rgba(255,255,255,0.7)\");\n    text.setAttribute(\"font-size\", \"2.5\");\n    text.textContent = metric.name;\n    legendGroup.appendChild(text);\n\n    svg.appendChild(legendGroup);\n    legendX += metric.name.length * 3.5 + 8;\n  });\n\n  container.appendChild(svg);\n}\n\nasync function updateCombinedChart(): Promise<void> {\n  const select = $(\"range-combined\") as HTMLSelectElement;\n  const value = (select.value || \"24h\") as RangeKey;\n  const rows = await loadHistoryForRange(value);\n  renderCombinedChart(\"combined-chart\", rows);\n}\n\n/* ---------- SCHEDULES ---------- */\n\nlet editingScheduleId: string | null = null;\n\nasync function loadSchedules(): Promise<void> {\n  const scheds = await fetchJSON<Schedule[]>(\"/api/schedules\");\n  const list = $(\"schedules-list\");\n  list.innerHTML = \"\";\n\n  // Refresh timer when schedules change\n  updateScheduleTimer();\n\n  if (!scheds.length) {\n    list.textContent = \"No schedules configured yet.\";\n    return;\n  }\n\n  for (const s of scheds) {\n    const card = document.createElement(\"div\");\n    card.className = \"schedule-card\";\n    card.dataset.scheduleId = s.id;\n\n    const scheduleInfo = document.createElement(\"div\");\n    scheduleInfo.className = \"schedule-info\";\n\n    const nameEl = document.createElement(\"div\");\n    nameEl.className = \"schedule-name\";\n    nameEl.textContent = s.name || s.id;\n\n    const detailsEl = document.createElement(\"div\");\n    detailsEl.className = \"schedule-details\";\n    const typeText = s.type === \"interval\" ? `Every ${s.every}` : `Daily at ${s.time_of_day}`;\n    const statusText = s.enabled ? \"Enabled\" : \"Disabled\";\n    detailsEl.textContent = `${typeText} \u2022 ${statusText}`;\n\n    scheduleInfo.appendChild(nameEl);\n    scheduleInfo.appendChild(detailsEl);\n\n    const actions = document.createElement(\"div\");\n    actions.className = \"schedule-actions\";\n\n    // Enable/Disable toggle\n    const toggleBtn = document.createElement(\"button\");\n    toggleBtn.className = \"schedule-btn schedule-btn-toggle\";\n    toggleBtn.innerHTML = s.enabled ? \"\u2713\" : \"\u25CB\";\n    toggleBtn.title = s.enabled ? \"Disable\" : \"Enable\";\n    toggleBtn.addEventListener(\"click\", async () => {\n      const updated = { ...s, enabled: !s.enabled };\n      try {\n        await fetchJSON(`/api/schedules/${s.id}`, {\n          method: \"PUT\",\n          body: JSON.stringify(updated),\n        });\n        await loadSchedules();\n      } catch (err) {\n        console.error(\"toggle schedule failed\", err);\n      }\n    });\n\n    // Edit button\n    const editBtn = document.createElement(\"button\");\n    editBtn.className = \"schedule-btn schedule-btn-edit\";\n    editBtn.innerHTML = \"\u270E\";\n    editBtn.title = \"Edit\";\n    editBtn.addEventListener(\"click\", () => {\n      editingScheduleId = s.id;\n      ($(\"schedule-form-id\") as HTMLInputElement).value = s.id;\n      ($(\"schedule-form-name\") as HTMLInputElement).value = s.name || \"\";\n      ($(\"schedule-form-type\") as HTMLSelectElement).value = s.type;\n      ($(\"schedule-form-every\") as HTMLInputElement).value = s.every || \"\";\n      ($(\"schedule-form-timeOfDay\") as HTMLInputElement).value = s.time_of_day || \"\";\n      ($(\"schedule-form-enabled\") as HTMLInputElement).checked = s.enabled;\n      ($(\"schedule-form-submit\") as HTMLButtonElement).textContent = \"Update\";\n      toggleScheduleFields(s.type);\n      ($(\"schedule-form-cancel\") as HTMLButtonElement).style.display = \"inline-block\";\n      // Scroll to form\n      document.getElementById(\"schedule-form\")?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n    });\n\n    // Delete button\n    const deleteBtn = document.createElement(\"button\");\n    deleteBtn.className = \"schedule-btn schedule-btn-delete\";\n    deleteBtn.innerHTML = \"\uD83D\uDDD1\";\n    deleteBtn.title = \"Delete\";\n    deleteBtn.addEventListener(\"click\", async () => {\n      if (!confirm(`Delete schedule \"${s.name || s.id}\"?`)) return;\n      try {\n        await fetchJSON(`/api/schedules/${s.id}`, {\n          method: \"DELETE\",\n        });\n        // Remove the card immediately for better UX\n        card.remove();\n        // Also reload to ensure consistency\n        await loadSchedules();\n      } catch (err) {\n        console.error(\"delete schedule failed\", err);\n        alert(\"Failed to delete schedule. Please refresh the page.\");\n      }\n    });\n\n    actions.appendChild(toggleBtn);\n    actions.appendChild(editBtn);\n    actions.appendChild(deleteBtn);\n\n    card.appendChild(scheduleInfo);\n    card.appendChild(actions);\n    list.appendChild(card);\n  }\n}\n\n/* ---------- NAV ---------- */\n\nfunction setupNav(): void {\n  // Sidebar toggle functionality\n  const sidebar = document.getElementById(\"sidebar\");\n  const sidebarToggle = document.getElementById(\"sidebar-toggle\");\n  const isExpanded = localStorage.getItem(\"sidebar-expanded\") === \"true\";\n\n  if (sidebar) {\n    if (isExpanded) {\n      sidebar.classList.remove(\"collapsed\");\n    } else {\n      sidebar.classList.add(\"collapsed\");\n    }\n\n    if (sidebarToggle) {\n      sidebarToggle.addEventListener(\"click\", () => {\n        sidebar.classList.toggle(\"collapsed\");\n        const expanded = !sidebar.classList.contains(\"collapsed\");\n        localStorage.setItem(\"sidebar-expanded\", String(expanded));\n      });\n    }\n  }\n\n  const buttons = document.querySelectorAll<HTMLButtonElement>(\".nav-item\");\n  buttons.forEach((btn) => {\n    btn.addEventListener(\"click\", () => {\n      // Expand sidebar when nav item is clicked (if collapsed)\n      if (sidebar && sidebar.classList.contains(\"collapsed\")) {\n        sidebar.classList.remove(\"collapsed\");\n        localStorage.setItem(\"sidebar-expanded\", \"true\");\n      }\n\n      const view = btn.dataset.view;\n      if (!view) return;\n\n      buttons.forEach((b) => b.classList.remove(\"nav-item-active\"));\n      btn.classList.add(\"nav-item-active\");\n\n      document\n        .querySelectorAll<HTMLElement>(\".view\")\n        .forEach((v) => v.classList.remove(\"view-active\"));\n      const el = document.getElementById(`view-${view}`);\n      if (el) el.classList.add(\"view-active\");\n    });\n  });\n}\n\n/* ---------- RUN NOW ---------- */\n\nfunction setupRunNow(): void {\n  const btn = document.getElementById(\"run-now-btn\") as HTMLButtonElement | null;\n  if (!btn) return;\n\n  btn.addEventListener(\"click\", async () => {\n    btn.disabled = true;\n    btn.textContent = \"Starting...\";\n\n    // Show progress modal\n    const modal = showProgressModal();\n    const statusEl = modal.querySelector(\".progress-status\") as HTMLElement;\n    const messageEl = modal.querySelector(\".progress-message\") as HTMLElement;\n\n    try {\n      const result = await runSpeedtestWithProgress((stage: string, message: string) => {\n        if (statusEl) statusEl.textContent = stage;\n        if (messageEl) messageEl.textContent = message;\n        btn.textContent = message;\n      });\n\n      // Close modal and refresh data\n      closeProgressModal(modal);\n      await Promise.all([\n        loadSummary(),\n        loadHistoryTable(),\n        updateDownloadChart(),\n        updateUploadChart(),\n        updateLatencyChart(),\n        updateJitterChart(),\n      ]);\n    } catch (err) {\n      console.error(\"run-now failed\", err);\n      closeProgressModal(modal);\n      alert(\"Speedtest failed: \" + (err instanceof Error ? err.message : String(err)));\n    } finally {\n      btn.disabled = false;\n      btn.textContent = \"Run speedtest now\";\n    }\n  });\n}\n\nfunction showProgressModal(): HTMLElement {\n  const modal = document.createElement(\"div\");\n  modal.className = \"progress-modal-overlay\";\n  modal.innerHTML = `\n    <div class=\"progress-modal\">\n      <div class=\"progress-header\">\n        <h3>Running Speedtest</h3>\n      </div>\n      <div class=\"progress-content\">\n        <div class=\"progress-spinner\"></div>\n        <div class=\"progress-status\"></div>\n        <div class=\"progress-message\"></div>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(modal);\n  return modal;\n}\n\nfunction closeProgressModal(modal: HTMLElement): void {\n  if (modal && modal.parentNode) {\n    modal.parentNode.removeChild(modal);\n  }\n}\n\nasync function runSpeedtestWithProgress(\n  onProgress: (stage: string, message: string) => void\n): Promise<any> {\n  return new Promise((resolve, reject) => {\n    fetch(\"/api/run/stream\", { method: \"POST\" })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        if (!response.body) {\n          throw new Error(\"Response body is null\");\n        }\n\n        const reader = response.body.getReader();\n        const decoder = new TextDecoder();\n        let buffer = \"\";\n\n        function processChunk(): Promise<void> {\n          return reader.read().then(({ done, value }) => {\n            if (done) {\n              if (buffer.trim()) {\n                // Process remaining buffer\n                const lines = buffer.split(\"\\n\");\n                for (const line of lines) {\n                  if (line.startsWith(\"data: \")) {\n                    try {\n                      const data = JSON.parse(line.slice(6));\n                      if (data.type === \"completed\") {\n                        resolve(data.result);\n                        return;\n                      } else if (data.type === \"error\") {\n                        reject(new Error(data.message || \"Speedtest failed\"));\n                        return;\n                      }\n                    } catch (e) {\n                      console.error(\"Failed to parse SSE data:\", e);\n                    }\n                  }\n                }\n              }\n              return;\n            }\n\n            buffer += decoder.decode(value, { stream: true });\n            const lines = buffer.split(\"\\n\");\n            buffer = lines.pop() || \"\";\n\n            for (const line of lines) {\n              if (line.startsWith(\"data: \")) {\n                try {\n                  const data = JSON.parse(line.slice(6));\n                  if (data.type === \"progress\") {\n                    onProgress(data.stage || \"\", data.message || \"\");\n                  } else if (data.type === \"completed\") {\n                    reader.cancel();\n                    resolve(data.result);\n                    return;\n                  } else if (data.type === \"error\") {\n                    reader.cancel();\n                    reject(new Error(data.message || \"Speedtest failed\"));\n                    return;\n                  } else if (data.type === \"started\") {\n                    // Initial message, ignore\n                  }\n                } catch (e) {\n                  console.error(\"Failed to parse SSE data:\", e, line);\n                }\n              }\n            }\n\n            return processChunk();\n          });\n        }\n\n        return processChunk();\n      })\n      .catch(reject);\n  });\n}\n\n/* ---------- SCHEDULE FORM ---------- */\n\nfunction toggleScheduleFields(type: string): void {\n  const everyField = document.getElementById(\"schedule-form-every-field\");\n  const timeOfDayField = document.getElementById(\"schedule-form-timeOfDay-field\");\n\n  if (type === \"interval\") {\n    if (everyField) everyField.style.display = \"\";\n    if (timeOfDayField) timeOfDayField.style.display = \"none\";\n  } else if (type === \"daily\") {\n    if (everyField) everyField.style.display = \"none\";\n    if (timeOfDayField) timeOfDayField.style.display = \"\";\n  }\n}\n\nfunction setupScheduleForm(): void {\n  const form = document.getElementById(\"schedule-form\") as HTMLFormElement | null;\n  if (!form) return;\n\n  const typeSelect = $(\"schedule-form-type\") as HTMLSelectElement;\n  typeSelect.addEventListener(\"change\", () => {\n    toggleScheduleFields(typeSelect.value);\n  });\n\n  // Initialize fields based on default type\n  toggleScheduleFields(typeSelect.value);\n\n  const cancelBtn = $(\"schedule-form-cancel\") as HTMLButtonElement;\n  cancelBtn.addEventListener(\"click\", () => {\n    editingScheduleId = null;\n    form.reset();\n    ($(\"schedule-form-id\") as HTMLInputElement).value = \"\";\n    ($(\"schedule-form-enabled\") as HTMLInputElement).checked = true;\n    ($(\"schedule-form-submit\") as HTMLButtonElement).textContent = \"Add\";\n    cancelBtn.style.display = \"none\";\n    toggleScheduleFields(typeSelect.value);\n  });\n\n  form.addEventListener(\"submit\", async (ev) => {\n    ev.preventDefault();\n\n    const data = new FormData(form);\n    const id = (data.get(\"id\") as string) || \"\";\n    const payload: any = {\n      name: data.get(\"name\") || \"\",\n      type: data.get(\"type\") || \"interval\",\n      enabled: data.get(\"enabled\") === \"on\",\n      every: data.get(\"every\") || \"\",\n      time_of_day: data.get(\"timeOfDay\") || \"\",\n    };\n\n    try {\n      if (editingScheduleId) {\n        // Update existing\n        await fetchJSON(`/api/schedules/${editingScheduleId}`, {\n          method: \"PUT\",\n          body: JSON.stringify(payload),\n        });\n      } else {\n        // Create new\n        await fetchJSON(\"/api/schedules\", {\n          method: \"POST\",\n          body: JSON.stringify(payload),\n        });\n      }\n      form.reset();\n      ($(\"schedule-form-id\") as HTMLInputElement).value = \"\";\n      ($(\"schedule-form-enabled\") as HTMLInputElement).checked = true;\n      ($(\"schedule-form-submit\") as HTMLButtonElement).textContent = \"Add\";\n      cancelBtn.style.display = \"none\";\n      editingScheduleId = null;\n      await loadSchedules();\n    } catch (err) {\n      console.error(\"save schedule failed\", err);\n    }\n  });\n}\n\n/* ---------- RANGE DROPDOWNS ---------- */\n\nfunction setupRangeSelectors(): void {\n  const d = $(\"range-download\") as HTMLSelectElement;\n  const u = $(\"range-upload\") as HTMLSelectElement;\n  const l = $(\"range-latency\") as HTMLSelectElement;\n  const j = $(\"range-jitter\") as HTMLSelectElement;\n\n  const dt = $(\"chart-type-download\") as HTMLButtonElement;\n  const ut = $(\"chart-type-upload\") as HTMLButtonElement;\n  const lt = $(\"chart-type-latency\") as HTMLButtonElement;\n  const jt = $(\"chart-type-jitter\") as HTMLButtonElement;\n\n  d.addEventListener(\"change\", () => {\n    updateDownloadChart().catch((err) =>\n      console.error(\"updateDownloadChart\", err),\n    );\n  });\n  u.addEventListener(\"change\", () => {\n    updateUploadChart().catch((err) =>\n      console.error(\"updateUploadChart\", err),\n    );\n  });\n  l.addEventListener(\"change\", () => {\n    updateLatencyChart().catch((err) =>\n      console.error(\"updateLatencyChart\", err),\n    );\n  });\n  j.addEventListener(\"change\", () => {\n    updateJitterChart().catch((err) =>\n      console.error(\"updateJitterChart\", err),\n    );\n  });\n\n  dt?.addEventListener(\"click\", () => {\n    dt.classList.toggle(\"active\");\n    updateDownloadChart().catch((err) =>\n      console.error(\"updateDownloadChart\", err),\n    );\n  });\n  ut?.addEventListener(\"click\", () => {\n    ut.classList.toggle(\"active\");\n    updateUploadChart().catch((err) =>\n      console.error(\"updateUploadChart\", err),\n    );\n  });\n  lt?.addEventListener(\"click\", () => {\n    lt.classList.toggle(\"active\");\n    updateLatencyChart().catch((err) =>\n      console.error(\"updateLatencyChart\", err),\n    );\n  });\n  jt?.addEventListener(\"click\", () => {\n    jt.classList.toggle(\"active\");\n    updateJitterChart().catch((err) =>\n      console.error(\"updateJitterChart\", err),\n    );\n  });\n}\n\n/* ---------- THEME SELECTION ---------- */\n\nasync function loadSchemesForTemplate(templateName: string): Promise<void> {\n  const schemeSelect = $(\"pref-scheme\") as HTMLSelectElement;\n  const currentScheme = localStorage.getItem(\"scheme\") || \"default\";\n\n  try {\n    const schemes = await fetchJSON<\n      Array<{ name: string; display: string; accent: string; border: boolean }>\n    >(`/api/schemes?template=${encodeURIComponent(templateName)}`);\n\n    schemeSelect.innerHTML = \"\";\n    schemes.forEach((scheme) => {\n      const option = document.createElement(\"option\");\n      option.value = scheme.name;\n      option.textContent = scheme.display || scheme.name;\n      if (scheme.name === currentScheme) {\n        option.selected = true;\n      }\n      schemeSelect.appendChild(option);\n    });\n\n    if (schemeSelect.options.length === 0) {\n      const option = document.createElement(\"option\");\n      option.value = \"default\";\n      option.textContent = \"Default\";\n      option.selected = true;\n      schemeSelect.appendChild(option);\n    }\n  } catch (err) {\n    console.error(\"Failed to load schemes:\", err);\n  }\n}\n\nasync function applyTheme(templateName: string, schemeName: string): Promise<void> {\n  try {\n    const response = await fetch(\n      `/api/theme?template=${encodeURIComponent(templateName)}&scheme=${encodeURIComponent(schemeName)}`,\n    );\n    if (!response.ok) {\n      throw new Error(`Failed to load theme: ${response.status}`);\n    }\n    const css = await response.text();\n    const styleEl = document.getElementById(\"theme-css\");\n    if (styleEl) {\n      styleEl.textContent = css;\n    }\n    document.documentElement.setAttribute(\"data-template\", templateName);\n    document.documentElement.setAttribute(\"data-scheme\", schemeName);\n    localStorage.setItem(\"template\", templateName);\n    localStorage.setItem(\"scheme\", schemeName);\n  } catch (err) {\n    console.error(\"Failed to apply theme:\", err);\n  }\n}\n\nfunction setupThemeSelection(): void {\n  const templateSelect = $(\"pref-template\") as HTMLSelectElement;\n  const schemeSelect = $(\"pref-scheme\") as HTMLSelectElement;\n\n  // Set current values from localStorage or HTML attributes\n  const savedTemplate = localStorage.getItem(\"template\");\n  const savedScheme = localStorage.getItem(\"scheme\");\n  const htmlTemplate = document.documentElement.getAttribute(\"data-template\");\n  const htmlScheme = document.documentElement.getAttribute(\"data-scheme\");\n\n  const currentTemplate = savedTemplate || htmlTemplate || \"speedplane\";\n  const currentScheme = savedScheme || htmlScheme || \"default\";\n\n  // Set template select value if it exists in the options\n  if (Array.from(templateSelect.options).some((opt) => opt.value === currentTemplate)) {\n    templateSelect.value = currentTemplate;\n  }\n  loadSchemesForTemplate(currentTemplate).catch((err) =>\n    console.error(\"loadSchemesForTemplate\", err),\n  );\n\n  templateSelect.addEventListener(\"change\", async () => {\n    const newTemplate = templateSelect.value;\n    // Reset to default scheme when template changes\n    localStorage.setItem(\"template\", newTemplate);\n    localStorage.setItem(\"scheme\", \"default\");\n    await loadSchemesForTemplate(newTemplate);\n    schemeSelect.value = \"default\";\n    await applyTheme(newTemplate, \"default\");\n  });\n\n  schemeSelect.addEventListener(\"change\", async () => {\n    const newScheme = schemeSelect.value;\n    const template = templateSelect.value;\n    await applyTheme(template, newScheme);\n  });\n}\n\nfunction setupCombinedGraphPreference(): void {\n  const checkbox = $(\"pref-combined-graph\") as HTMLInputElement;\n  const logCheckbox = $(\"pref-logarithmic-scale\") as HTMLInputElement;\n  const combinedPanel = $(\"combined-chart-panel\");\n  const individualCharts = $(\"individual-charts\");\n  const combinedRangeSelect = $(\"range-combined\") as HTMLSelectElement;\n\n  // Load preferences (default: false/off)\n  const savedCombined = localStorage.getItem(\"combined-graph\");\n  const savedLog = localStorage.getItem(\"logarithmic-scale\");\n  const isCombinedEnabled = savedCombined === \"true\";\n  const isLogEnabled = savedLog === \"true\";\n  \n  checkbox.checked = isCombinedEnabled;\n  logCheckbox.checked = isLogEnabled;\n  updateChartVisibility(isCombinedEnabled);\n\n  const reloadCharts = () => {\n    if (checkbox.checked) {\n      updateCombinedChart().catch((err) =>\n        console.error(\"updateCombinedChart\", err),\n      );\n    } else {\n      // Reload individual charts\n      Promise.all([\n        updateDownloadChart(),\n        updateUploadChart(),\n        updateLatencyChart(),\n        updateJitterChart(),\n      ]).catch((err) => console.error(\"updateCharts\", err));\n    }\n  };\n\n  checkbox.addEventListener(\"change\", () => {\n    const enabled = checkbox.checked;\n    localStorage.setItem(\"combined-graph\", enabled ? \"true\" : \"false\");\n    updateChartVisibility(enabled);\n    reloadCharts();\n  });\n\n  logCheckbox.addEventListener(\"change\", () => {\n    const enabled = logCheckbox.checked;\n    localStorage.setItem(\"logarithmic-scale\", enabled ? \"true\" : \"false\");\n    // Only reload if combined graph is enabled\n    if (checkbox.checked) {\n      reloadCharts();\n    }\n  });\n\n  combinedRangeSelect.addEventListener(\"change\", () => {\n    if (checkbox.checked) {\n      reloadCharts();\n    }\n  });\n\n  function updateChartVisibility(showCombined: boolean): void {\n    if (showCombined) {\n      combinedPanel.style.display = \"block\";\n      individualCharts.style.display = \"none\";\n    } else {\n      combinedPanel.style.display = \"none\";\n      individualCharts.style.display = \"block\";\n    }\n  }\n}\n\n/* ---------- SCHEDULE TIMER ---------- */\n\nlet scheduleTimerInterval: number | null = null;\nlet nextRunTime: number | null = null;\nlet intervalDuration: number | null = null; // Full interval duration in milliseconds\nlet intervalStartTime: number | null = null; // When the current interval started\nlet ws: WebSocket | null = null;\n\nasync function updateScheduleTimer(): Promise<void> {\n  try {\n    const data = await fetchJSON<{\n      next_run: string | null;\n      remaining: number;\n      interval_duration: number;\n      timestamp: number;\n    }>(\"/api/next-run\");\n\n    const timerEl = document.getElementById(\"schedule-timer\");\n    if (!timerEl) return;\n\n    if (!data.next_run) {\n      timerEl.style.display = \"none\";\n      if (scheduleTimerInterval) {\n        clearInterval(scheduleTimerInterval);\n        scheduleTimerInterval = null;\n      }\n      nextRunTime = null;\n      intervalDuration = null;\n      intervalStartTime = null;\n      return;\n    }\n\n    timerEl.style.display = \"block\";\n    const nextRun = new Date(data.next_run).getTime();\n    nextRunTime = nextRun;\n    intervalDuration = (data.interval_duration || 0) * 1000; // Convert to milliseconds\n    // Calculate when the current interval started: nextRun - intervalDuration\n    intervalStartTime = nextRun - intervalDuration;\n    updateTimerDisplay();\n  } catch (err) {\n    console.error(\"Failed to fetch next run time:\", err);\n  }\n}\n\nfunction updateTimerDisplay(): void {\n  const timerEl = document.getElementById(\"schedule-timer\");\n  if (!timerEl || !nextRunTime || !intervalDuration || !intervalStartTime) return;\n\n  const now = Date.now();\n  const remaining = Math.max(0, nextRunTime - now);\n  // Calculate elapsed time since interval started\n  const elapsed = now - intervalStartTime;\n  const percent = Math.min(100, Math.max(0, (elapsed / intervalDuration) * 100));\n\n  const totalSeconds = Math.ceil(remaining / 1000);\n  const days = Math.floor(totalSeconds / 86400);\n  const hours = Math.floor((totalSeconds % 86400) / 3600);\n  const minutes = Math.floor((totalSeconds % 3600) / 60);\n  const seconds = totalSeconds % 60;\n\n  const parts: string[] = [];\n  if (days > 0) parts.push(`${days}d`);\n  if (hours > 0) parts.push(`${hours}h`);\n  if (minutes > 0) parts.push(`${minutes}m`);\n  if (seconds > 0 || parts.length === 0) parts.push(`${seconds}s`);\n\n  const timeStr = parts.join(\" \");\n\n  if (remaining > 0) {\n    timerEl.title = `Next speedtest in ${timeStr}`;\n    timerEl.classList.remove(\"paused\");\n    timerEl.style.setProperty(\"--progress-percent\", percent + \"%\");\n  } else {\n    timerEl.title = \"Ready to run (checking schedules...)\";\n    timerEl.classList.add(\"paused\");\n    timerEl.style.setProperty(\"--progress-percent\", \"100%\");\n  }\n}\n\nfunction startScheduleTimer(): void {\n  updateScheduleTimer();\n  if (scheduleTimerInterval) {\n    clearInterval(scheduleTimerInterval);\n  }\n  scheduleTimerInterval = window.setInterval(() => {\n    updateTimerDisplay();\n    // Refresh next run time every 30 seconds\n    if (Date.now() % 30000 < 1000) {\n      updateScheduleTimer();\n    }\n  }, 1000);\n}\n\nfunction connectWebSocket(): void {\n  const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n  const wsUrl = `${protocol}//${window.location.host}/ws`;\n\n  try {\n    ws = new WebSocket(wsUrl);\n\n    ws.onopen = () => {\n      console.log(\"WebSocket connected\");\n    };\n\n    ws.onmessage = (event) => {\n      try {\n        const data = JSON.parse(event.data);\n\n        if (data.type === \"speedtest-complete\") {\n          // New speedtest completed, refresh all data\n          const isCombinedGraph = localStorage.getItem(\"combined-graph\") === \"true\";\n          const chartPromises = isCombinedGraph\n            ? [updateCombinedChart()]\n            : [\n                updateDownloadChart(),\n                updateUploadChart(),\n                updateLatencyChart(),\n                updateJitterChart(),\n              ];\n          Promise.all([\n            loadSummary(),\n            loadHistoryTable(),\n            ...chartPromises,\n          ]).catch((err) => console.error(\"refresh after speedtest failed\", err));\n        } else if (data.type === \"ping\") {\n          // Keep-alive ping, no action needed\n        } else if (data.type === \"status\") {\n          // Connection status, no action needed\n        }\n      } catch (err) {\n        console.error(\"WebSocket message parse error:\", err);\n      }\n    };\n\n    ws.onerror = (error) => {\n      console.error(\"WebSocket error:\", error);\n    };\n\n    ws.onclose = () => {\n      console.log(\"WebSocket disconnected, reconnecting...\");\n      ws = null;\n      // Reconnect after 2 seconds\n      setTimeout(connectWebSocket, 2000);\n    };\n  } catch (err) {\n    console.error(\"Failed to create WebSocket:\", err);\n    // Retry after 2 seconds\n    setTimeout(connectWebSocket, 2000);\n  }\n}\n\n/* ---------- INIT ---------- */\n\nasync function init(): Promise<void> {\n  setupNav();\n  setupRunNow();\n  setupScheduleForm();\n  setupRangeSelectors();\n  setupThemeSelection();\n  setupCombinedGraphPreference();\n  startScheduleTimer();\n  connectWebSocket();\n\n  const isCombinedGraph = localStorage.getItem(\"combined-graph\") === \"true\";\n  const chartPromises = isCombinedGraph\n    ? [updateCombinedChart()]\n    : [\n        updateDownloadChart(),\n        updateUploadChart(),\n        updateLatencyChart(),\n        updateJitterChart(),\n      ];\n\n  await Promise.all([\n    loadSummary(),\n    loadHistoryTable(),\n    loadSchedules(),\n    ...chartPromises,\n  ]);\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  init().catch((err) => console.error(err));\n});\n"],
  "mappings": "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",
  "names": ["yPos", "overallMin", "overallMax", "overallLogMin", "overallLogMax", "overallLogRange", "lines"]
}
